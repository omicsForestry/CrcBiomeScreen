#!/usr/bin/env Rscript
cat("Checking and installing Bioconductor dependencies...\n")

bioc_pkgs <- c(
  "phyloseq",
  "microbiomeMarker",
  "microbiome",
  "ggtree",
  "curatedMetagenomicData"
)

missing_pkgs <- setdiff(bioc_pkgs, rownames(installed.packages()))

if (length(missing_pkgs) > 0) {
  if (!requireNamespace("BiocManager", quietly = TRUE)) {
    install.packages("BiocManager", repos = "https://cran.r-project.org")
  }
  BiocManager::install(missing_pkgs, ask = FALSE, update = FALSE)
} else {
  cat("All Bioconductor packages are already installed.\n")
}
