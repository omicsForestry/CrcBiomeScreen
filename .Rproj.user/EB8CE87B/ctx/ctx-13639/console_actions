{
    "type": [
        2,
        2,
        0,
        1,
        2,
        2,
        0,
        1,
        2,
        3,
        3,
        3,
        3,
        3,
        3,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        3,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        2,
        0,
        1,
        2,
        3,
        3,
        3,
        3,
        3,
        3,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        3,
        0,
        1,
        2,
        2,
        0,
        1,
        2,
        3,
        3,
        3,
        3,
        3,
        3,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        3,
        0,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        2,
        0,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        2,
        0,
        0,
        1,
        2
    ],
    "data": [
        "\nR version 4.3.3 (2024-02-29) -- \"Angel Food Cake\"\nCopyright (C) 2024 The R Foundation for Statistical Computing\nPlatform: aarch64-apple-darwin20 (64-bit)\n\nR is free software and comes with ABSOLUTELY NO WARRANTY.\nYou are welcome to redistribute it under certain conditions.\nType 'license()' or 'licence()' for distribution details.\n\n  Natural language support but running in an English locale\n\nR is a collaborative project with many contributors.\nType 'contributors()' for more information and\n'citation()' on h",
        "ow to cite R or R packages in publications.\n\nType 'demo()' for some demos, 'help()' for on-line help, or\n'help.start()' for an HTML browser interface to help.\nType 'q()' to quit R.\n\n",
        "> ",
        "devtools::install()",
        "These packages have more recent versions available.\nIt is recommended to update all of them.\nWhich would you like to update?\n\n 1: All                                   \n 2: CRAN packages only                    \n 3: None                                  \n 4: pbkrtest     (0.5.4  -> 0.5.5 ) [CRAN]\n 5: purrr        (1.0.4  -> 1.1.0 ) [CRAN]\n 6: parallelly   (1.45.0 -> 1.45.1) [CRAN]\n 7: globals      (0.17.0 -> 0.18.0) [CRAN]\n 8: future       (1.40.0 -> 1.58.0) [CRAN]\n 9: rprojroot    (2.0.4  -> 2.1.0 ) [CRAN]",
        "\n10: waldo        (0.6.1  -> 0.6.2 ) [CRAN]\n11: httr2        (1.1.2  -> 1.2.1 ) [CRAN]\n12: future.apply (1.11.3 -> 1.20.0) [CRAN]\n13: glmnet       (4.1-9  -> 4.1-10) [CRAN]\n14: doFuture     (1.0.2  -> 1.1.2 ) [CRAN]\n\n",
        "Enter one or more numbers, or an empty line to skip updates: ",
        "1",
        "pbkrtest     (0.5.4  -> 0.5.5 ) [CRAN]\npurrr        (1.0.4  -> 1.1.0 ) [CRAN]\nparallelly   (1.45.0 -> 1.45.1) [CRAN]\nglobals      (0.17.0 -> 0.18.0) [CRAN]\nfuture       (1.40.0 -> 1.58.0) [CRAN]\nrprojroot    (2.0.4  -> 2.1.0 ) [CRAN]\nwaldo        (0.6.1  -> 0.6.2 ) [CRAN]\nhttr2        (1.1.2  -> 1.2.1 ) [CRAN]\nfuture.apply (1.11.3 -> 1.20.0) [CRAN]\nglmnet       (4.1-9  -> 4.1-10) [CRAN]\ndoFuture     (1.0.2  -> 1.1.2 ) [CRAN]\n",
        "Skipping 5 packages not available: phyloseq, microbiomeMarker, microbiome, ggtree, curatedMetagenomicData\nInstalling 11 packages: pbkrtest, purrr, parallelly, globals, future, rprojroot, waldo, httr2, future.apply, glmnet, doFuture\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/pbkrtest_0.5.4.tgz'\nContent type 'application/x-gzip' length 219704 bytes (214 KB)\n==================================================\ndownloaded 214 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/",
        "macosx/big-sur-arm64/contrib/4.3/purrr_1.0.4.tgz'\nContent type 'application/x-gzip' length 560624 bytes (547 KB)\n==================================================\ndownloaded 547 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/parallelly_1.45.0.tgz'\nContent type 'application/x-gzip' length 581617 bytes (567 KB)\n==================================================\ndownloaded 567 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/globals_0.17.",
        "0.tgz'\nContent type 'application/x-gzip' length 126670 bytes (123 KB)\n==================================================\ndownloaded 123 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/future_1.40.0.tgz'\nContent type 'application/x-gzip' length 911643 bytes (890 KB)\n==================================================\ndownloaded 890 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/rprojroot_2.0.4.tgz'\nContent type 'application/x-gzip' lengt",
        "h 105502 bytes (103 KB)\n==================================================\ndownloaded 103 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/waldo_0.6.1.tgz'\nContent type 'application/x-gzip' length 133534 bytes (130 KB)\n==================================================\ndownloaded 130 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/httr2_1.1.2.tgz'\nContent type 'application/x-gzip' length 733426 bytes (716 KB)\n============================",
        "======================\ndownloaded 716 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/future.apply_1.11.3.tgz'\nContent type 'application/x-gzip' length 153630 bytes (150 KB)\n==================================================\ndownloaded 150 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/glmnet_4.1-9.tgz'\nContent type 'application/x-gzip' length 5887093 bytes (5.6 MB)\n==================================================\ndownloaded 5.6 MB\n\n",
        "trying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/doFuture_1.0.2.tgz'\nContent type 'application/x-gzip' length 135094 bytes (131 KB)\n==================================================\ndownloaded 131 KB\n\n",
        "\nThe downloaded binary packages are in\n\t/var/folders/44/b8zxjfwx1rd0t5mmkn_nqwy00000gn/T//RtmpkoK62s/downloaded_packages\n\u001B[36m──\u001B[39m \u001B[36mR CMD build\u001B[39m \u001B[36m─────────────────────────────────────────────────────────────────────────────────────────\u001B[39m\n  \r   checking for file ‘/Users/Aurora/Library/CloudStorage/OneDrive-Uni",
        "versityofLeeds/AboutMyPhD/Scripts/CrcBiomeScreen/DESCRIPTION’ ...\r  \r\u001B[32m✔\u001B[39m  \u001B[38;5;247mchecking for file ‘/Users/Aurora/Library/CloudStorage/OneDrive-UniversityofLeeds/AboutMyPhD/Scripts/CrcBiomeScreen/DESCRIPTION’\u001B[39m\u001B[36m\u001B[39m\n\r  \r\u001B[38;5;247m─\u001B[39m\u001B[38;5;247m  \u001B[39m\u001B[38;5;247mpreparing ‘CrcBiomeScreen’:\u001B[39m\u001B[36m\u001B[36m (604ms)\u001B[36m\u001B[39m\n   checking DESCRIPTION meta-information ...\r  \r\u001B[32m✔\u001B[39m  \u001B[38;5;247mchecking DESCRIPTION meta-information\u001B[39m\u001B[36m\u001B[39m\n\r  \r\u001B[38;5;247m─\u001B[39m\u001B",
        "[38;5;247m  \u001B[39m\u001B[38;5;247mchecking for LF line-endings in source and make files and shell scripts\u001B[39m\u001B[36m\u001B[39m\n\r  \r\u001B[38;5;247m─\u001B[39m\u001B[38;5;247m  \u001B[39m\u001B[38;5;247mchecking for empty or unneeded directories\u001B[39m\u001B[36m\u001B[39m\n   Removed empty directory ‘CrcBiomeScreen/tests/testthat/_snaps’\n\r  \r\u001B[38;5;247m─\u001B[39m\u001B[38;5;247m  \u001B[39m\u001B[38;5;247mbuilding ‘CrcBiomeScreen_0.0.0.9000.tar.gz’\u001B[39m\u001B[36m\u001B[39m\n\r  \r   \n\rRunning /Library/Frameworks/R.framework/Resources/bin/R CMD INSTALL \\\n  /var/folders/44/b8zxj",
        "fwx1rd0t5mmkn_nqwy00000gn/T//RtmpkoK62s/CrcBiomeScreen_0.0.0.9000.tar.gz \\\n  --install-tests \n* installing to library ‘/Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/library’\n* installing *source* package ‘CrcBiomeScreen’ ...\n** using staged installation\n** R\n** tests\n** byte-compile and prepare package for lazy loading\n** help\n*** installing help indices\n** building package indices\n** testing if installed package can be loaded from temporary location\n** testing if installed package ca",
        "n be loaded from final location\n** testing if installed package keeps a record of temporary installation path\n* DONE (CrcBiomeScreen)\n",
        "> ",
        "library(CrcBiomeScreen)",
        "Loading required package: BiocManager\nBioconductor version 3.18 (BiocManager 1.30.26), R 4.3.3 (2024-02-29)\nBioconductor version '3.18' is out-of-date; the current release version '3.21' is available with R\n  version '4.5'; see https://bioconductor.org/install\nRegistered S3 method overwritten by 'future':\n  method               from      \n  all.equal.connection parallelly\n",
        "> ",
        "ModelingXGBoost",
        "function (CrcBiomeScreenObject = NULL, k.rf = 10, repeats = 5, \n    TaskName = NULL, TrueLabel = NULL, num_cores = num_cores) \n{\n    if (is.null(CrcBiomeScreenObject$ModelData)) {\n        stop(\"ModelData is missing in CrcBiomeScreenObject. Please run SplitDataSet first.\")\n    }\n    set.seed(123)\n    cl <- makePSOCKcluster(num_cores)\n    registerDoParallel(cl)\n    getDoParWorkers()\n    tune_grid <- expand.grid(nrounds = c(100, 200, 300), max_depth = c(3, \n        5, 7, 9), eta = c(0.01, 0.1, 0.3), gamma = 0,",
        " colsample_bytree = c(0.5, \n        0.75, 1), min_child_weight = 1, subsample = c(0.5, 0.75, \n        1))\n    train_data <- CrcBiomeScreenObject$ModelData$Training\n    label_train <- CrcBiomeScreenObject$ModelData$TrainLabel\n    class_counts <- table(label_train)\n    positive_class <- names(which.max(class_counts))\n    negative_class <- names(class_counts)[names(class_counts) != \n        positive_class]\n    w_pos <- 1\n    w_neg <- nrow(train_data[label_train == positive_class, ])/nrow(train_data[label_train",
        " == \n        negative_class, ])\n    weights <- ifelse(label_train == positive_class, w_pos, w_neg)\n    ctrl <- trainControl(method = \"repeatedcv\", number = k.rf, \n        repeats = repeats, summaryFunction = twoClassSummary, \n        classProbs = TRUE, allowParallel = TRUE)\n    train_data <- as.data.frame(train_data)\n    train_data$label_train <- label_train\n    set.seed(123)\n    model_fit <- train(label_train ~ ., data = train_data, method = \"xgbTree\", \n        metric = \"ROC\", trControl = ctrl, tuneGrid = ",
        "tune_grid, \n        weights = weights, verbose = TRUE)\n    stopCluster(cl)\n    registerDoSEQ()\n    CrcBiomeScreenObject$ModelResult$XGBoost <- list(model = model_fit, \n        bestTune = model_fit$bestTune)\n    saveRDS(CrcBiomeScreenObject, paste0(\"CrcBiomeScreenObject_\", \n        TaskName, \".rds\"))\n    return(CrcBiomeScreenObject)\n}\n<bytecode: 0x309645e40>\n<environment: namespace:CrcBiomeScreen>\n",
        "> ",
        "devtools::install()",
        "These packages have more recent versions available.\nIt is recommended to update all of them.\nWhich would you like to update?\n\n 1: All                                   \n 2: CRAN packages only                    \n 3: None                                  \n 4: pbkrtest     (0.5.4  -> 0.5.5 ) [CRAN]\n 5: purrr        (1.0.4  -> 1.1.0 ) [CRAN]\n 6: parallelly   (1.45.0 -> 1.45.1) [CRAN]\n 7: globals      (0.17.0 -> 0.18.0) [CRAN]\n 8: future       (1.40.0 -> 1.58.0) [CRAN]\n 9: rprojroot    (2.0.4  -> 2.1.0 ) [CRAN]",
        "\n10: waldo        (0.6.1  -> 0.6.2 ) [CRAN]\n11: httr2        (1.1.2  -> 1.2.1 ) [CRAN]\n12: future.apply (1.11.3 -> 1.20.0) [CRAN]\n13: glmnet       (4.1-9  -> 4.1-10) [CRAN]\n14: doFuture     (1.0.2  -> 1.1.2 ) [CRAN]\n\n",
        "Enter one or more numbers, or an empty line to skip updates: ",
        "1",
        "pbkrtest     (0.5.4  -> 0.5.5 ) [CRAN]\npurrr        (1.0.4  -> 1.1.0 ) [CRAN]\nparallelly   (1.45.0 -> 1.45.1) [CRAN]\nglobals      (0.17.0 -> 0.18.0) [CRAN]\nfuture       (1.40.0 -> 1.58.0) [CRAN]\nrprojroot    (2.0.4  -> 2.1.0 ) [CRAN]\nwaldo        (0.6.1  -> 0.6.2 ) [CRAN]\nhttr2        (1.1.2  -> 1.2.1 ) [CRAN]\nfuture.apply (1.11.3 -> 1.20.0) [CRAN]\nglmnet       (4.1-9  -> 4.1-10) [CRAN]\ndoFuture     (1.0.2  -> 1.1.2 ) [CRAN]\n",
        "Skipping 5 packages not available: phyloseq, microbiomeMarker, microbiome, ggtree, curatedMetagenomicData\nInstalling 11 packages: pbkrtest, purrr, parallelly, globals, future, rprojroot, waldo, httr2, future.apply, glmnet, doFuture\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/pbkrtest_0.5.4.tgz'\nContent type 'application/x-gzip' length 219704 bytes (214 KB)\n==================================================\ndownloaded 214 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/",
        "macosx/big-sur-arm64/contrib/4.3/purrr_1.0.4.tgz'\nContent type 'application/x-gzip' length 560624 bytes (547 KB)\n==================================================\ndownloaded 547 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/parallelly_1.45.0.tgz'\nContent type 'application/x-gzip' length 581617 bytes (567 KB)\n==================================================\ndownloaded 567 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/globals_0.17.",
        "0.tgz'\nContent type 'application/x-gzip' length 126670 bytes (123 KB)\n==================================================\ndownloaded 123 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/future_1.40.0.tgz'\nContent type 'application/x-gzip' length 911643 bytes (890 KB)\n==================================================\ndownloaded 890 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/rprojroot_2.0.4.tgz'\nContent type 'application/x-gzip' lengt",
        "h 105502 bytes (103 KB)\n==================================================\ndownloaded 103 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/waldo_0.6.1.tgz'\nContent type 'application/x-gzip' length 133534 bytes (130 KB)\n==================================================\ndownloaded 130 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/httr2_1.1.2.tgz'\nContent type 'application/x-gzip' length 733426 bytes (716 KB)\n============================",
        "======================\ndownloaded 716 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/future.apply_1.11.3.tgz'\nContent type 'application/x-gzip' length 153630 bytes (150 KB)\n==================================================\ndownloaded 150 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/glmnet_4.1-9.tgz'\nContent type 'application/x-gzip' length 5887093 bytes (5.6 MB)\n==================================================\ndownloaded 5.6 MB\n\n",
        "trying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/doFuture_1.0.2.tgz'\nContent type 'application/x-gzip' length 135094 bytes (131 KB)\n==================================================\ndownloaded 131 KB\n\n",
        "\nThe downloaded binary packages are in\n\t/var/folders/44/b8zxjfwx1rd0t5mmkn_nqwy00000gn/T//RtmpkoK62s/downloaded_packages\n\u001B[36m──\u001B[39m \u001B[36mR CMD build\u001B[39m \u001B[36m─────────────────────────────────────────────────────────────────────────────────────────\u001B[39m\n  \r   checking for file ‘/Users/Aurora/Library/CloudStorage/OneDrive-Uni",
        "versityofLeeds/AboutMyPhD/Scripts/CrcBiomeScreen/DESCRIPTION’ ...\r  \r\u001B[32m✔\u001B[39m  \u001B[38;5;247mchecking for file ‘/Users/Aurora/Library/CloudStorage/OneDrive-UniversityofLeeds/AboutMyPhD/Scripts/CrcBiomeScreen/DESCRIPTION’\u001B[39m\u001B[36m\u001B[39m\n\r  \r\u001B[38;5;247m─\u001B[39m\u001B[38;5;247m  \u001B[39m\u001B[38;5;247mpreparing ‘CrcBiomeScreen’:\u001B[39m\u001B[36m\u001B[36m (610ms)\u001B[36m\u001B[39m\n   checking DESCRIPTION meta-information ...\r  \r\u001B[32m✔\u001B[39m  \u001B[38;5;247mchecking DESCRIPTION meta-information\u001B[39m\u001B[36m\u001B[39m\n\r  \r\u001B[38;5;247m─\u001B[39m\u001B",
        "[38;5;247m  \u001B[39m\u001B[38;5;247mchecking for LF line-endings in source and make files and shell scripts\u001B[39m\u001B[36m\u001B[39m\n\r  \r\u001B[38;5;247m─\u001B[39m\u001B[38;5;247m  \u001B[39m\u001B[38;5;247mchecking for empty or unneeded directories\u001B[39m\u001B[36m\u001B[39m\n   Removed empty directory ‘CrcBiomeScreen/tests/testthat/_snaps’\n\u001B[38;5;247m─\u001B[39m\u001B[38;5;247m  \u001B[39m\u001B[38;5;247mbuilding ‘CrcBiomeScreen_0.0.0.9000.tar.gz’\u001B[39m\u001B[36m\u001B[39m\n\r  \r   \n\rRunning /Library/Frameworks/R.framework/Resources/bin/R CMD INSTALL \\\n  /var/folders/44/b8zxjfwx1",
        "rd0t5mmkn_nqwy00000gn/T//RtmpkoK62s/CrcBiomeScreen_0.0.0.9000.tar.gz \\\n  --install-tests \n* installing to library ‘/Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/library’\n* installing *source* package ‘CrcBiomeScreen’ ...\n** using staged installation\n** R\n** tests\n** byte-compile and prepare package for lazy loading\n** help\n*** installing help indices\n** building package indices\n** testing if installed package can be loaded from temporary location\n** testing if installed package can be",
        " loaded from final location\n** testing if installed package keeps a record of temporary installation path\n* DONE (CrcBiomeScreen)\n",
        "> ",
        "devtools::document()",
        "\u001B[38;5;253m\u001B[36mℹ\u001B[38;5;253m Updating \u001B[34mCrcBiomeScreen\u001B[38;5;253m documentation\u001B[39m\n\u001B[38;5;253mWriting \u001B]8;;file:///Users/Aurora/Library/CloudStorage/OneDrive-UniversityofLeeds/AboutMyPhD/Scripts/CrcBiomeScreen/NAMESPACE\u0007\u001B[34mNAMESPACE\u001B[38;5;253m\u001B]8;;\u0007\u001B[39m\n\u001B[38;5;253m\u001B[36mℹ\u001B[38;5;253m Loading \u001B[34mCrcBiomeScreen\u001B[38;5;253m\u001B[39m\n",
        "Registered S3 method overwritten by 'rmutil':\n  method         from\n  print.response httr\nRegistered S3 method overwritten by 'gplots':\n  method         from     \n  reorder.factor DescTools\n",
        "> ",
        "devtools::install()",
        "These packages have more recent versions available.\nIt is recommended to update all of them.\nWhich would you like to update?\n\n 1: All                                   \n 2: CRAN packages only                    \n 3: None                                  \n 4: pbkrtest     (0.5.4  -> 0.5.5 ) [CRAN]\n 5: purrr        (1.0.4  -> 1.1.0 ) [CRAN]\n 6: parallelly   (1.45.0 -> 1.45.1) [CRAN]\n 7: globals      (0.17.0 -> 0.18.0) [CRAN]\n 8: future       (1.40.0 -> 1.58.0) [CRAN]\n 9: rprojroot    (2.0.4  -> 2.1.0 ) [CRAN]",
        "\n10: waldo        (0.6.1  -> 0.6.2 ) [CRAN]\n11: httr2        (1.1.2  -> 1.2.1 ) [CRAN]\n12: future.apply (1.11.3 -> 1.20.0) [CRAN]\n13: glmnet       (4.1-9  -> 4.1-10) [CRAN]\n14: doFuture     (1.0.2  -> 1.1.2 ) [CRAN]\n\n",
        "Enter one or more numbers, or an empty line to skip updates: ",
        "1",
        "pbkrtest     (0.5.4  -> 0.5.5 ) [CRAN]\npurrr        (1.0.4  -> 1.1.0 ) [CRAN]\nparallelly   (1.45.0 -> 1.45.1) [CRAN]\nglobals      (0.17.0 -> 0.18.0) [CRAN]\nfuture       (1.40.0 -> 1.58.0) [CRAN]\nrprojroot    (2.0.4  -> 2.1.0 ) [CRAN]\nwaldo        (0.6.1  -> 0.6.2 ) [CRAN]\nhttr2        (1.1.2  -> 1.2.1 ) [CRAN]\nfuture.apply (1.11.3 -> 1.20.0) [CRAN]\nglmnet       (4.1-9  -> 4.1-10) [CRAN]\ndoFuture     (1.0.2  -> 1.1.2 ) [CRAN]\n",
        "Skipping 5 packages not available: phyloseq, microbiomeMarker, microbiome, ggtree, curatedMetagenomicData\nInstalling 11 packages: pbkrtest, purrr, parallelly, globals, future, rprojroot, waldo, httr2, future.apply, glmnet, doFuture\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/pbkrtest_0.5.4.tgz'\nContent type 'application/x-gzip' length 219704 bytes (214 KB)\n==================================================\ndownloaded 214 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/",
        "macosx/big-sur-arm64/contrib/4.3/purrr_1.0.4.tgz'\nContent type 'application/x-gzip' length 560624 bytes (547 KB)\n==================================================\ndownloaded 547 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/parallelly_1.45.0.tgz'\nContent type 'application/x-gzip' length 581617 bytes (567 KB)\n==================================================\ndownloaded 567 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/globals_0.17.",
        "0.tgz'\nContent type 'application/x-gzip' length 126670 bytes (123 KB)\n==================================================\ndownloaded 123 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/future_1.40.0.tgz'\nContent type 'application/x-gzip' length 911643 bytes (890 KB)\n==================================================\ndownloaded 890 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/rprojroot_2.0.4.tgz'\nContent type 'application/x-gzip' lengt",
        "h 105502 bytes (103 KB)\n==================================================\ndownloaded 103 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/waldo_0.6.1.tgz'\nContent type 'application/x-gzip' length 133534 bytes (130 KB)\n==================================================\ndownloaded 130 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/httr2_1.1.2.tgz'\nContent type 'application/x-gzip' length 733426 bytes (716 KB)\n============================",
        "======================\ndownloaded 716 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/future.apply_1.11.3.tgz'\nContent type 'application/x-gzip' length 153630 bytes (150 KB)\n==================================================\ndownloaded 150 KB\n\ntrying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/glmnet_4.1-9.tgz'\nContent type 'application/x-gzip' length 5887093 bytes (5.6 MB)\n==================================================\ndownloaded 5.6 MB\n\n",
        "trying URL 'https://cran.ma.imperial.ac.uk/bin/macosx/big-sur-arm64/contrib/4.3/doFuture_1.0.2.tgz'\nContent type 'application/x-gzip' length 135094 bytes (131 KB)\n==================================================\ndownloaded 131 KB\n\n",
        "\nThe downloaded binary packages are in\n\t/var/folders/44/b8zxjfwx1rd0t5mmkn_nqwy00000gn/T//RtmpkoK62s/downloaded_packages\n\u001B[36m──\u001B[39m \u001B[36mR CMD build\u001B[39m \u001B[36m─────────────────────────────────────────────────────────────────────────────────────────\u001B[39m\n  \r   checking for file ‘/Users/Aurora/Library/CloudStorage/OneDrive-Uni",
        "versityofLeeds/AboutMyPhD/Scripts/CrcBiomeScreen/DESCRIPTION’ ...\r  \r\u001B[32m✔\u001B[39m  \u001B[38;5;247mchecking for file ‘/Users/Aurora/Library/CloudStorage/OneDrive-UniversityofLeeds/AboutMyPhD/Scripts/CrcBiomeScreen/DESCRIPTION’\u001B[39m\u001B[36m\u001B[39m\n\r  \r\u001B[38;5;247m─\u001B[39m\u001B[38;5;247m  \u001B[39m\u001B[38;5;247mpreparing ‘CrcBiomeScreen’:\u001B[39m\u001B[36m\u001B[36m (467ms)\u001B[36m\u001B[39m\n   checking DESCRIPTION meta-information ...\r  \r\u001B[32m✔\u001B[39m  \u001B[38;5;247mchecking DESCRIPTION meta-information\u001B[39m\u001B[36m\u001B[39m\n\r  \r\u001B[38;5;247m─\u001B[39m\u001B",
        "[38;5;247m  \u001B[39m\u001B[38;5;247mchecking for LF line-endings in source and make files and shell scripts\u001B[39m\u001B[36m\u001B[39m\n\r  \r\u001B[38;5;247m─\u001B[39m\u001B[38;5;247m  \u001B[39m\u001B[38;5;247mchecking for empty or unneeded directories\u001B[39m\u001B[36m\u001B[39m\n   Removed empty directory ‘CrcBiomeScreen/tests/testthat/_snaps’\n\u001B[38;5;247m─\u001B[39m\u001B[38;5;247m  \u001B[39m\u001B[38;5;247mbuilding ‘CrcBiomeScreen_0.0.0.9000.tar.gz’\u001B[39m\u001B[36m\u001B[39m\n\r  \r   \n\rRunning /Library/Frameworks/R.framework/Resources/bin/R CMD INSTALL \\\n  /var/folders/44/b8zxjfwx1",
        "rd0t5mmkn_nqwy00000gn/T//RtmpkoK62s/CrcBiomeScreen_0.0.0.9000.tar.gz \\\n  --install-tests \n* installing to library ‘/Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/library’\n* installing *source* package ‘CrcBiomeScreen’ ...\n** using staged installation\n** R\n** tests\n** byte-compile and prepare package for lazy loading\n** help\n*** installing help indices\n** building package indices\n** testing if installed package can be loaded from temporary location\n** testing if installed package can be",
        " loaded from final location\n** testing if installed package keeps a record of temporary installation path\n* DONE (CrcBiomeScreen)\n",
        "> ",
        "ModelingXGBoost",
        "function (CrcBiomeScreenObject = NULL, k.rf = 10, repeats = 5, \n    TaskName = NULL, TrueLabel = NULL, num_cores = num_cores) \n{\n    if (is.null(CrcBiomeScreenObject$ModelData)) {\n        stop(\"ModelData is missing in CrcBiomeScreenObject. Please run SplitDataSet first.\")\n    }\n    set.seed(123)\n    cl <- makePSOCKcluster(num_cores)\n    registerDoParallel(cl)\n    getDoParWorkers()\n    tune_grid <- expand.grid(nrounds = c(100, 200, 300), max_depth = c(3, \n        5, 7, 9), eta = c(0.01, 0.1, 0.3), gamma = 0,",
        " colsample_bytree = c(0.5, \n        0.75, 1), min_child_weight = 1, subsample = c(0.5, 0.75, \n        1))\n    train_data <- CrcBiomeScreenObject$ModelData$Training\n    label_train <- CrcBiomeScreenObject$ModelData$TrainLabel\n    class_counts <- table(label_train)\n    positive_class <- names(which.max(class_counts))\n    negative_class <- names(class_counts)[names(class_counts) != \n        positive_class]\n    w_pos <- 1\n    w_neg <- nrow(train_data[label_train == positive_class, ])/nrow(train_data[label_train",
        " == \n        negative_class, ])\n    weights <- ifelse(label_train == positive_class, w_pos, w_neg)\n    ctrl <- trainControl(method = \"repeatedcv\", number = k.rf, \n        repeats = repeats, summaryFunction = twoClassSummary, \n        classProbs = TRUE, allowParallel = TRUE)\n    train_data <- as.data.frame(train_data)\n    train_data$label_train <- label_train\n    set.seed(123)\n    model_fit <- train(label_train ~ ., data = train_data, method = \"xgbTree\", \n        metric = \"ROC\", trControl = ctrl, tuneGrid = ",
        "tune_grid, \n        weights = weights, verbose = TRUE)\n    stopCluster(cl)\n    registerDoSEQ()\n    CrcBiomeScreenObject$ModelResult$XGBoost <- list(model = model_fit, \n        bestTune = model_fit$bestTune)\n    saveRDS(CrcBiomeScreenObject, paste0(\"CrcBiomeScreenObject_\", \n        TaskName, \".rds\"))\n    return(CrcBiomeScreenObject)\n}\n<bytecode: 0x31a0ac748>\n<environment: namespace:CrcBiomeScreen>\n\nRestarting R session...\n\n",
        "> ",
        "devtools::load_all()",
        "\u001B[38;5;253m\u001B[36mℹ\u001B[38;5;253m Loading \u001B[34mCrcBiomeScreen\u001B[38;5;253m\u001B[39m\n",
        "Registered S3 method overwritten by 'rmutil':\n  method         from\n  print.response httr\nRegistered S3 method overwritten by 'gplots':\n  method         from     \n  reorder.factor DescTools\n",
        "> ",
        "> ",
        "ModelingXGBoost",
        "function(CrcBiomeScreenObject = NULL,\n                            k.rf = 10,\n                            repeats = 5,\n                            TaskName = NULL,\n                            TrueLabel = NULL,\n                            num_cores = num_cores) {\n  if (is.null(CrcBiomeScreenObject$ModelData)) {\n    stop(\"ModelData is missing in CrcBiomeScreenObject. Please run SplitDataSet first.\")\n  }\n\n  set.seed(123)\n  # Parallel setup（memory friendly）\n  cl <- makePSOCKcluster(num_cores)\n  registerDoPar",
        "allel(cl)\n  getDoParWorkers()\n\n  tune_grid <- expand.grid(\n    nrounds = c(100, 200, 300),\n    max_depth = c(3, 5, 7, 9),\n    eta = c(0.01, 0.1, 0.3),\n    gamma = 0,\n    colsample_bytree = c(0.5, 0.75, 1),\n    min_child_weight = 1,\n    subsample = c(0.5, 0.75, 1)\n  )\n  # Prepare training data\n  train_data <- CrcBiomeScreenObject$ModelData$Training\n  label_train <- CrcBiomeScreenObject$ModelData$TrainLabel\n\n  # label_train <- factor(label_train, levels = unique(CrcBiomeScreenObject$ModelData$TrainLabel))\n  #",
        " # Suppose Positive is majority class.  Upweight Negative by ratio:\n  # w_pos <- 1\n  # w_neg <- nrow(train_data[train_data$Class==\"Positive\",]) /\n  #         nrow(train_data[train_data$Class==\"Negative\",])\n  # weights <- ifelse(train_data$Class==\"Positive\", w_pos, w_neg)\n\n  class_counts <- table(label_train)\n  positive_class <- names(which.max(class_counts))\n  negative_class <- names(class_counts)[names(class_counts) != positive_class]\n\n  w_pos <- 1\n  w_neg <- nrow(train_data[label_train == positive_class, ",
        "]) /\n    nrow(train_data[label_train == negative_class, ])\n  weights <- ifelse(label_train == positive_class, w_pos, w_neg)\n\n  # Define caret trainControl\n  ctrl <- trainControl(\n    method = \"repeatedcv\",\n    number = k.rf,\n    repeats = repeats,\n    summaryFunction = twoClassSummary,\n    classProbs = TRUE,\n    allowParallel = TRUE\n  )\n\n  # model_weights <- model_weights[CrcBiomeScreenObject$ModelData$TrainLabel]\n\n  train_data <- as.data.frame(train_data)\n  train_data$label_train <- label_train\n\n  set.seed",
        "(123)\n  # Train the model using caret\n  model_fit <- train(label_train ~ .,\n    data = train_data,\n    method = \"xgbTree\",\n    metric = \"ROC\",\n    trControl = ctrl,\n    tuneGrid = tune_grid,\n    weights = weights,\n    verbose = TRUE\n  )\n\n  stopCluster(cl)\n  registerDoSEQ()\n\n  CrcBiomeScreenObject$ModelResult$XGBoost <- list(\n    model = model_fit,\n    bestTune = model_fit$bestTune\n  )\n  saveRDS(CrcBiomeScreenObject, paste0(\"CrcBiomeScreenObject_\", TaskName, \".rds\"))\n  return(CrcBiomeScreenObject)\n}\n<environ",
        "ment: namespace:CrcBiomeScreen>\n",
        "> ",
        "# 清理编译文件",
        "> ",
        "devtools::clean_dll()",
        "> ",
        "> ",
        "# 重新文档化",
        "> ",
        "devtools::document()",
        "\u001B[38;5;253m\u001B[36mℹ\u001B[38;5;253m Updating \u001B[34mCrcBiomeScreen\u001B[38;5;253m documentation\u001B[39m\n\u001B[38;5;253m\u001B[36mℹ\u001B[38;5;253m Loading \u001B[34mCrcBiomeScreen\u001B[38;5;253m\u001B[39m\n",
        "> ",
        "> ",
        "# 重新加载",
        "> ",
        "devtools::load_all()",
        "\u001B[38;5;253m\u001B[36mℹ\u001B[38;5;253m Loading \u001B[34mCrcBiomeScreen\u001B[38;5;253m\u001B[39m\n",
        "> ",
        "ModelingXGBoost",
        "function(CrcBiomeScreenObject = NULL,\n                            k.rf = 10,\n                            repeats = 5,\n                            TaskName = NULL,\n                            TrueLabel = NULL,\n                            num_cores = num_cores) {\n  if (is.null(CrcBiomeScreenObject$ModelData)) {\n    stop(\"ModelData is missing in CrcBiomeScreenObject. Please run SplitDataSet first.\")\n  }\n\n  set.seed(123)\n  # Parallel setup（memory friendly）\n  cl <- makePSOCKcluster(num_cores)\n  registerDoPar",
        "allel(cl)\n  getDoParWorkers()\n\n  tune_grid <- expand.grid(\n    nrounds = c(100, 200, 300),\n    max_depth = c(3, 5, 7, 9),\n    eta = c(0.01, 0.1, 0.3),\n    gamma = 0,\n    colsample_bytree = c(0.5, 0.75, 1),\n    min_child_weight = 1,\n    subsample = c(0.5, 0.75, 1)\n  )\n  # Prepare training data\n  train_data <- CrcBiomeScreenObject$ModelData$Training\n  label_train <- CrcBiomeScreenObject$ModelData$TrainLabel\n\n  # label_train <- factor(label_train, levels = unique(CrcBiomeScreenObject$ModelData$TrainLabel))\n  #",
        " # Suppose Positive is majority class.  Upweight Negative by ratio:\n  # w_pos <- 1\n  # w_neg <- nrow(train_data[train_data$Class==\"Positive\",]) /\n  #         nrow(train_data[train_data$Class==\"Negative\",])\n  # weights <- ifelse(train_data$Class==\"Positive\", w_pos, w_neg)\n\n  class_counts <- table(label_train)\n  positive_class <- names(which.max(class_counts))\n  negative_class <- names(class_counts)[names(class_counts) != positive_class]\n\n  w_pos <- 1\n  w_neg <- nrow(train_data[label_train == positive_class, ",
        "]) /\n    nrow(train_data[label_train == negative_class, ])\n  weights <- ifelse(label_train == positive_class, w_pos, w_neg)\n\n  # Define caret trainControl\n  ctrl <- trainControl(\n    method = \"repeatedcv\",\n    number = k.rf,\n    repeats = repeats,\n    summaryFunction = twoClassSummary,\n    classProbs = TRUE,\n    allowParallel = TRUE\n  )\n\n  # model_weights <- model_weights[CrcBiomeScreenObject$ModelData$TrainLabel]\n\n  train_data <- as.data.frame(train_data)\n  train_data$label_train <- label_train\n\n  set.seed",
        "(123)\n  # Train the model using caret\n  model_fit <- train(label_train ~ .,\n    data = train_data,\n    method = \"xgbTree\",\n    metric = \"ROC\",\n    trControl = ctrl,\n    tuneGrid = tune_grid,\n    weights = weights,\n    verbose = TRUE\n  )\n\n  stopCluster(cl)\n  registerDoSEQ()\n\n  CrcBiomeScreenObject$ModelResult$XGBoost <- list(\n    model = model_fit,\n    bestTune = model_fit$bestTune\n  )\n  saveRDS(CrcBiomeScreenObject, paste0(\"CrcBiomeScreenObject_\", TaskName, \".rds\"))\n  return(CrcBiomeScreenObject)\n}\n<environ",
        "ment: namespace:CrcBiomeScreen>\n",
        "> ",
        "rm(list = ls())",
        "> ",
        "gc()",
        "           used  (Mb) gc trigger   (Mb) limit (Mb) max used   (Mb)\nNcells 13353748 713.2   19428201 1037.6         NA 19428201 1037.6\nVcells 24040566 183.5   38277207  292.1     102400 30626002  233.7\n",
        "> ",
        "> ",
        ".rs.restartR()  ",
        "\nRestarting R session...\n\n"
    ]
}